(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2239:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(5155),r=s(2115);let i=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(s),children:t})},n=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(s),children:t})},l=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 ".concat(s),children:t})},c=e=>{let{children:t,variant:s="primary",size:r="md",disabled:i=!1,onClick:n,className:l="",...c}=e;return(0,a.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(l),disabled:i,onClick:n,...c,children:t})},o=e=>{let{label:t,error:s,className:r="",...i}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,a.jsx)("input",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 ".concat(s?"border-red-300":""," ").concat(r),...i}),s&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:s})]})},d=e=>{let{children:t,variant:s="default",className:r=""}=e;return(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({default:"bg-gray-100 text-gray-800",draft:"bg-yellow-100 text-yellow-800",submitted:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"}[s]," ").concat(r),children:t})},m=e=>{let{onClose:t,children:s}=e;return(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:t}),(0,a.jsx)("div",{className:"relative",children:s})]})})};var x=s(5704);class u{getToken(){return localStorage.getItem("permitProToken")}setToken(e){localStorage.setItem("permitProToken",e)}removeToken(){localStorage.removeItem("permitProToken")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getToken(),a={headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...t};try{let t=await fetch("".concat(this.baseURL).concat(e),a);if(!t.ok){if(401===t.status)throw this.removeToken(),Error("Authentication failed. Please login again.");throw Error("HTTP error! status: ".concat(t.status))}return t.json()}catch(e){if("TypeError"===e.name&&e.message.includes("fetch"))throw Error("Network error. Please check your connection and ensure the server is running.");throw e}}async login(e,t){let s=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return s.token&&this.setToken(s.token),s}async logout(){this.removeToken()}async getPermits(){return this.request("/permits")}async createPermit(e){return this.request("/permits",{method:"POST",body:JSON.stringify(e)})}async updatePackageStatus(e,t){return this.request("/permits/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t})})}async uploadDocument(e,t){return this.request("/permits/".concat(e,"/documents"),{method:"POST",body:JSON.stringify(t)})}async getPermitTypes(){return this.request("/permit-types")}async getDashboardStats(){return this.request("/dashboard/stats")}constructor(){this.baseURL=x.env.NEXT_PUBLIC_API_URL||"https://permitpro-463203.uk.r.appspot.com/api"}}let h=new u;function p(e){let{onLogin:t,onAdminLogin:s}=e,[n,d]=(0,r.useState)({email:"",password:""}),[m,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),j=async e=>{e.preventDefault(),x(!0),p("");try{if(g)"admin@permitpro.com"===n.email&&"admin123"===n.password?s({id:"admin",name:"System Administrator",email:"admin@permitpro.com",role:"admin"}):p("Invalid admin credentials. Please try again.");else{let e=await h.login(n.email,n.password);t(e.user)}}catch(e){p("Invalid credentials. Please try again.")}finally{x(!1)}},f=e=>{d(t=>({...t,[e.target.name]:e.target.value}))};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-blue-100 flex items-center justify-center p-4",children:(0,a.jsx)(i,{className:"w-full max-w-md",children:(0,a.jsxs)(l,{className:"p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"PermitPro"}),(0,a.jsx)("p",{className:"text-gray-600",children:g?"Admin Access":"Sign in to manage your permits"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>y(!g),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:g?"Switch to User Login":"Admin Login"})})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsx)(o,{label:"Email",type:"email",name:"email",value:n.email,onChange:f,placeholder:"Enter your email",required:!0}),(0,a.jsx)(o,{label:"Password",type:"password",name:"password",value:n.password,onChange:f,placeholder:"Enter your password",required:!0}),u&&(0,a.jsx)("div",{className:"text-red-600 text-sm text-center",children:u}),(0,a.jsx)(c,{type:"submit",className:"w-full ".concat(g?"bg-red-600 hover:bg-red-700":""),disabled:m,children:m?"Signing in...":g?"Admin Sign In":"Sign In"}),g&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"Admin Credentials:"}),(0,a.jsx)("br",{}),"Email: admin@permitpro.com",(0,a.jsx)("br",{}),"Password: admin123"]})})]})]})})})}let g=e=>{let{className:t}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})},y=e=>{let{className:t}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})},j=e=>{let{className:t}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},f=e=>{let{className:t}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})};function b(e){let{packages:t,onCreatePackage:s,onSelectPackage:m,onLogout:x}=e,[u,h]=(0,r.useState)(""),[p,b]=(0,r.useState)("all"),N=(0,r.useMemo)(()=>t.filter(e=>{let t=e.customerName.toLowerCase().includes(u.toLowerCase())||e.propertyAddress.toLowerCase().includes(u.toLowerCase()),s="all"===p||e.status===p;return t&&s}),[t,u,p]);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"PermitPro Dashboard"}),(0,a.jsx)(c,{variant:"outline",onClick:x,children:"Sign Out"})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(o,{placeholder:"Search by customer name or address...",value:u,onChange:e=>h(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"Draft",children:"Draft"}),(0,a.jsx)("option",{value:"Submitted",children:"Submitted"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]}),(0,a.jsxs)(c,{onClick:s,children:[(0,a.jsx)(y,{className:"h-4 w-4 mr-2"}),"New Permit"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)(i,{children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j,{className:"h-8 w-8 text-primary-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Permits"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})})}),(0,a.jsx)(i,{children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f,{className:"h-8 w-8 text-yellow-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"Submitted"===e.status).length})]})]})})}),(0,a.jsx)(i,{children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-4 w-4 bg-green-600 rounded-full"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"Completed"===e.status).length})]})]})})})]}),(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Permit Packages"})}),(0,a.jsxs)(l,{className:"p-0",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Property Address"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"County"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.propertyAddress})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.county})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)(d,{variant:{Draft:"draft",Submitted:"submitted",Completed:"completed"}[e.status]||"default",children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsx)(c,{variant:"outline",size:"sm",onClick:()=>m(e),children:"View Details"})})]},e.id))})]})}),0===N.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(j,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No permits found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:u||"all"!==p?"Try adjusting your search or filter criteria.":"Get started by creating a new permit package."})]})]})]})]})]})}let N=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},v=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var w={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let k=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:l="",children:c,iconNode:o,...d}=e;return(0,r.createElement)("svg",{ref:t,...w,width:a,height:a,stroke:s,strokeWidth:n?24*Number(i)/Number(a):i,className:v("lucide",l),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...o.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(c)?c:[c]])}),C=(e,t)=>{let s=(0,r.forwardRef)((s,a)=>{let{className:i,...n}=s;return(0,r.createElement)(k,{ref:a,iconNode:t,className:v("lucide-".concat(N(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...n})});return s.displayName=N(e),s},S=C("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),P=C("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),A=C("file-chart-column-increasing",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]),q=C("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),M=C("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),L=C("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),D=C("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),E=C("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),I=C("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);function T(e){let{packageData:t,onBack:x,onUpdate:u}=e,[p,g]=(0,r.useState)(!1),[y,j]=(0,r.useState)({name:"",file:null}),[f,b]=(0,r.useState)(!1),[N,v]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1);console.log("PackageDetailView - packageData:",t),console.log("PackageDetailView - contractors:",null==t?void 0:t.contractors),console.log("PackageDetailView - checklistItems:",null==t?void 0:t.checklistItems);let C=(null==t?void 0:t.contractors)||[];0===C.length&&(null==t?void 0:t.contractorName)&&C.push({id:"legacy-primary",name:t.contractorName,license:t.contractorLicense||"",phone:t.contractorPhone||"",email:t.contractorEmail||"",role:"Primary Contractor",specialties:"General Construction"});let T=(null==t?void 0:t.checklistItems)||[],R=async e=>{b(!0);try{await h.updatePackageStatus(t.id,e),u({...t,status:e})}catch(e){console.error("Failed to update status:",e)}finally{b(!1)}},F=async()=>{v(!0);try{var e;let a=new(await s.e(496).then(s.t.bind(s,7496,23))).default,r="\nPERMIT PACKAGE SUBMISSION\n========================\n\nPackage ID: ".concat(t.id,"\nPermit Number: ").concat(t.permitNumber||"N/A","\nCustomer: ").concat(t.customerName,"\nProperty: ").concat(t.propertyAddress,"\nCounty: ").concat(t.county,"\nPermit Type: ").concat(t.permitType,"\nStatus: ").concat(t.status,"\nCreated: ").concat(new Date(t.createdAt).toLocaleString(),"\n\nCONTRACTORS\n===========\n").concat(C.map(e=>"\n".concat(e.role,": ").concat(e.name,"\nLicense: ").concat(e.license,"\nPhone: ").concat(e.phone,"\nEmail: ").concat(e.email,"\nSpecialties: ").concat(e.specialties,"\n")).join("\n"),"\n\nCHECKLIST ITEMS\n==============\n").concat(T.map((e,t)=>"\n".concat(t+1,". ").concat(e.description,"\n   Status: ").concat(e.completed?"Completed":"Pending","\n   ").concat(e.notes?"Notes: ".concat(e.notes):"","\n")).join("\n"),"\n\nDOCUMENTS\n=========\n").concat((null==(e=t.documents)?void 0:e.map(e=>"- ".concat(e.name," (").concat(e.type,")")).join("\n"))||"No documents uploaded","\n      ").trim();if(a.file("Package_Information.txt",r),t.documents&&t.documents.length>0){let e=a.folder("Documents");t.documents.forEach(t=>{e.file(t.name,"Document: ".concat(t.name,"\nType: ").concat(t.type,"\nUploaded: ").concat(t.uploadedAt||"Unknown"))})}let i=await a.generateAsync({type:"blob"}),n=window.URL.createObjectURL(i),l=document.createElement("a");l.href=n,l.download="PermitPackage_".concat(t.id,"_").concat(new Date().toISOString().split("T")[0],".zip"),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(n)}catch(e){console.error("Failed to create zip file:",e),alert("Failed to create download package. Please try again.")}finally{v(!1)}},O=async()=>{k(!0);try{let e=(await h.getPermits()).packages||[],t="\nPERMIT PRO SYSTEM - COMPREHENSIVE REPORT\n========================================\n\nGenerated: ".concat(new Date().toLocaleString(),"\nTotal Packages: ").concat(e.length,"\n\nPACKAGE SUMMARY\n===============\n").concat(e.map((e,t)=>"\n".concat(t+1,". Package ").concat(e.id,"\n   Customer: ").concat(e.customerName,"\n   Property: ").concat(e.propertyAddress,"\n   County: ").concat(e.county,"\n   Permit Type: ").concat(e.permitType,"\n   Status: ").concat(e.status,"\n   Created: ").concat(new Date(e.createdAt).toLocaleString(),"\n   ").concat(e.contractorName?"Primary Contractor: ".concat(e.contractorName):"","\n")).join("\n"),"\n\nSTATUS BREAKDOWN\n================\n").concat(Object.entries(e.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{})).map(e=>{let[t,s]=e;return"".concat(t,": ").concat(s," packages")}).join("\n"),"\n\nCOUNTY BREAKDOWN\n================\n").concat(Object.entries(e.reduce((e,t)=>(e[t.county]=(e[t.county]||0)+1,e),{})).map(e=>{let[t,s]=e;return"".concat(t,": ").concat(s," packages")}).join("\n"),"\n\nPERMIT TYPE BREAKDOWN\n=====================\n").concat(Object.entries(e.reduce((e,t)=>(e[t.permitType]=(e[t.permitType]||0)+1,e),{})).map(e=>{let[t,s]=e;return"".concat(t,": ").concat(s," packages")}).join("\n"),"\n      ").trim(),s=new Blob([t],{type:"text/plain"}),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="PermitPro_Report_".concat(new Date().toISOString().split("T")[0],".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}catch(e){console.error("Failed to generate report:",e),alert("Failed to generate report. Please try again.")}finally{k(!1)}},U=async e=>{if(e.preventDefault(),y.file){b(!0);try{let e={name:y.name||y.file.name,url:"documents/".concat(t.id,"/").concat(y.file.name),packageId:t.id};await h.uploadDocument(t.id,e);let s={...t,documents:[...t.documents||[],e]};u(s),g(!1),j({name:"",file:null})}catch(e){console.error("Failed to upload document:",e)}finally{b(!1)}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(c,{variant:"outline",onClick:x,className:"mr-4",children:[(0,a.jsx)(S,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Package Details"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(c,{onClick:F,disabled:N,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,a.jsx)(P,{className:"h-4 w-4 mr-2"}),N?"Creating...":"Download All"]}),(0,a.jsxs)(c,{onClick:O,disabled:w,className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(A,{className:"h-4 w-4 mr-2"}),w?"Generating...":"Generate Report"]})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Package Information"}),(0,a.jsx)(d,{variant:{Draft:"draft",Submitted:"submitted",Completed:"completed"}[t.status]||"default",children:t.status})]})}),(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(q,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Customer Name"}),(0,a.jsx)("p",{className:"text-base text-gray-900",children:t.customerName})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(M,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Property Address"}),(0,a.jsx)("p",{className:"text-base text-gray-900",children:t.propertyAddress})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"h-5 w-5 bg-primary-100 rounded mt-0.5 flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-2 w-2 bg-primary-600 rounded"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"County"}),(0,a.jsx)("p",{className:"text-base text-gray-900",children:t.county})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(L,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Created Date"}),(0,a.jsx)("p",{className:"text-base text-gray-900",children:new Date(t.createdAt).toLocaleDateString()})]})]})]})})]}),(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(q,{className:"h-5 w-5"}),"Contractors"]})}),(0,a.jsx)(l,{children:C&&C.length>0?(0,a.jsx)("div",{className:"space-y-4",children:C.map(e=>(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-lg",children:e.name}),(0,a.jsx)(d,{variant:"Primary Contractor"===e.role?"default":"secondary",children:e.role})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"License:"})," ",e.license]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Phone:"})," ",e.phone]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",e.email]}),e.specialties&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Specialties:"})," ",e.specialties]})]})]})})},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No contractors assigned"})})]}),(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(D,{className:"h-5 w-5"}),"Permit Checklist"]})}),(0,a.jsx)(l,{children:T&&T.length>0?(0,a.jsx)("div",{className:"space-y-3",children:T.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,a.jsx)("div",{className:"w-5 h-5 border-2 rounded flex items-center justify-center ".concat(e.completed?"border-green-500 bg-green-500 text-white":"border-gray-300"),children:e.completed&&(0,a.jsx)("span",{className:"text-xs",children:"✓"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),e.required&&(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Required"}),e.completed&&(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded",children:"Completed"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"file",className:"text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:t=>{t.target.files[0]&&console.log("Uploading file for ".concat(e.title,":"),t.target.files[0])}}),e.completed&&(0,a.jsxs)(c,{variant:"secondary",size:"sm",children:[(0,a.jsx)(E,{className:"h-4 w-4 mr-1"}),"Download"]})]})]})]},e.id))}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No checklist items available"})})]}),(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Documents"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[t.documents&&t.documents.length>0&&(0,a.jsxs)(c,{variant:"outline",onClick:handleDownloadAll,disabled:f,children:[(0,a.jsx)(E,{className:"h-4 w-4 mr-2"}),f?"Preparing...":"Download All"]}),(0,a.jsxs)(c,{onClick:()=>g(!0),children:[(0,a.jsx)(I,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]})]})}),(0,a.jsx)(l,{children:t.documents&&t.documents.length>0?(0,a.jsx)("div",{className:"space-y-3",children:t.documents.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(D,{className:"h-5 w-5 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]}),(0,a.jsx)(c,{variant:"outline",size:"sm",children:"View"})]},t))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(D,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents uploaded"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Upload your first document to get started."})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Status Management"})}),(0,a.jsx)(l,{children:(0,a.jsx)("div",{className:"space-y-3",children:["Draft","Submitted","Completed"].map(e=>(0,a.jsx)(c,{variant:t.status===e?"primary":"outline",className:"w-full justify-start",onClick:()=>R(e),disabled:f,children:e},e))})})]}),(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(c,{variant:"outline",className:"w-full justify-start",children:"Generate Report"}),(0,a.jsx)(c,{variant:"outline",className:"w-full justify-start",children:"Send Notification"}),(0,a.jsx)(c,{variant:"outline",className:"w-full justify-start",children:"Export Data"})]})})]})]})]})}),p&&(0,a.jsx)(m,{onClose:()=>g(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Document"})}),(0,a.jsxs)("form",{onSubmit:U,className:"p-6 space-y-4",children:[(0,a.jsx)(o,{label:"Document Name",value:y.name,onChange:e=>j(t=>({...t,name:e.target.value})),placeholder:"Enter document name"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select File"}),(0,a.jsx)("input",{type:"file",onChange:e=>j(t=>({...t,file:e.target.files[0]})),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(c,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,a.jsx)(c,{type:"submit",disabled:f,children:f?"Uploading...":"Upload"})]})]})]})})]})}function R(e){var t;let{isOpen:s,onClose:i,onPackageCreated:n}=e,[l,d]=(0,r.useState)([]),[x,u]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[y,j]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[N,v]=(0,r.useState)({customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",propertyAddress:"",propertyParcelId:"",propertyZoning:"",primaryContractorId:"",subcontractorIds:[],county:"",permitType:""}),[w,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)("");(0,r.useEffect)(()=>{s&&(P(),A())},[s]);let P=async()=>{try{let e=await h.getPermitTypes();d(e)}catch(e){console.error("Failed to load permit types:",e)}},A=async()=>{try{u([{id:"1",name:"ABC Construction LLC",license:"CBC1234567",phone:"(305) 555-0456",email:"contact@abcconstruction.com",specialties:"General Construction, Renovations"},{id:"2",name:"XYZ Builders Inc",license:"CBC7654321",phone:"(407) 555-0321",email:"info@xyzbuilders.com",specialties:"Residential Construction, Additions"},{id:"3",name:"Elite Electrical Services",license:"EC123456",phone:"(305) 555-0101",email:"info@eliteelectrical.com",specialties:"Electrical, HVAC"},{id:"4",name:"Premier Plumbing Co",license:"PC789012",phone:"(305) 555-0202",email:"info@premierplumbing.com",specialties:"Plumbing, Water Systems"}])}catch(e){console.error("Failed to load contractors:",e)}},q=async(e,t)=>{if(!e||!t)return void g([]);j(!0);try{let e=M(t);g(e)}catch(e){console.error("Failed to load checklist:",e),g([])}finally{j(!1)}},M=e=>({"mobile-home":[{title:"Site plan approval",description:"Submit site plan for review",required:!0},{title:"Foundation inspection",description:"Schedule foundation inspection",required:!0},{title:"Electrical hookup verification",description:"Verify electrical connections",required:!0},{title:"Plumbing connections check",description:"Check plumbing connections",required:!0},{title:"Tie-down system inspection",description:"Inspect tie-down system",required:!0},{title:"Final occupancy inspection",description:"Final inspection for occupancy",required:!0}],"modular-home":[{title:"Foundation permit",description:"Obtain foundation permit",required:!0},{title:"Modular unit delivery approval",description:"Approve modular unit delivery",required:!0},{title:"Electrical rough-in inspection",description:"Electrical rough-in inspection",required:!0},{title:"Plumbing rough-in inspection",description:"Plumbing rough-in inspection",required:!0},{title:"HVAC installation check",description:"Check HVAC installation",required:!0},{title:"Final building inspection",description:"Final building inspection",required:!0},{title:"Certificate of occupancy",description:"Obtain certificate of occupancy",required:!0}],shed:[{title:"Setback requirements verification",description:"Verify setback requirements",required:!0},{title:"Foundation/slab inspection",description:"Inspect foundation or slab",required:!0},{title:"Structural framing check",description:"Check structural framing",required:!0},{title:"Roofing inspection",description:"Inspect roofing",required:!0},{title:"Final inspection",description:"Final inspection",required:!0}],addition:[{title:"Building permit application",description:"Submit building permit application",required:!0},{title:"Structural plans review",description:"Review structural plans",required:!0},{title:"Foundation inspection",description:"Foundation inspection",required:!0},{title:"Framing inspection",description:"Framing inspection",required:!0},{title:"Electrical rough-in",description:"Electrical rough-in inspection",required:!0},{title:"Plumbing rough-in",description:"Plumbing rough-in inspection",required:!0},{title:"Insulation inspection",description:"Insulation inspection",required:!0},{title:"Drywall inspection",description:"Drywall inspection",required:!0},{title:"Final inspection",description:"Final inspection",required:!0}],hvac:[{title:"HVAC system design review",description:"Review HVAC system design",required:!0},{title:"Ductwork installation inspection",description:"Inspect ductwork installation",required:!0},{title:"Equipment mounting verification",description:"Verify equipment mounting",required:!0},{title:"Electrical connections check",description:"Check electrical connections",required:!0},{title:"Gas line connections (if applicable)",description:"Check gas line connections",required:!1},{title:"System startup and testing",description:"Test system startup",required:!0},{title:"Final inspection and approval",description:"Final inspection and approval",required:!0}],electrical:[{title:"Electrical plans review",description:"Review electrical plans",required:!0},{title:"Rough-in electrical inspection",description:"Rough-in electrical inspection",required:!0},{title:"Panel installation verification",description:"Verify panel installation",required:!0},{title:"Outlet and switch installation",description:"Install outlets and switches",required:!0},{title:"GFCI and AFCI compliance check",description:"Check GFCI and AFCI compliance",required:!0},{title:"Final electrical inspection",description:"Final electrical inspection",required:!0},{title:"Certificate of completion",description:"Obtain certificate of completion",required:!0}],plumbing:[{title:"Plumbing plans review",description:"Review plumbing plans",required:!0},{title:"Rough-in plumbing inspection",description:"Rough-in plumbing inspection",required:!0},{title:"Water line installation",description:"Install water lines",required:!0},{title:"Drain line installation",description:"Install drain lines",required:!0},{title:"Fixture installation verification",description:"Verify fixture installation",required:!0},{title:"Pressure testing",description:"Perform pressure testing",required:!0},{title:"Final plumbing inspection",description:"Final plumbing inspection",required:!0}]})[e]||[],L=async()=>{if(N.newContractorName&&N.newContractorLicense)try{let e={id:Date.now().toString(),name:N.newContractorName,license:N.newContractorLicense,phone:N.newContractorPhone||"",email:N.newContractorEmail||"",address:N.newContractorAddress||"",specialties:N.newContractorSpecialties||""};u(t=>[...t,e]),v(e=>({...e,newContractorName:"",newContractorLicense:"",newContractorPhone:"",newContractorEmail:"",newContractorAddress:"",newContractorSpecialties:""})),b(!1)}catch(e){console.error("Error adding contractor:",e)}},D=e=>{let{name:t,value:s}=e.target;v(e=>{let a={...e,[t]:s};return("county"===t||"permitType"===t)&&q("county"===t?s:a.county,"permitType"===t?s:a.permitType),a})},E=async e=>{e.preventDefault(),k(!0),S("");try{let e=x.find(e=>e.id===N.primaryContractorId),t=x.filter(e=>N.subcontractorIds.includes(e.id)),s={...N,contractorName:(null==e?void 0:e.name)||"",contractorLicense:(null==e?void 0:e.license)||"",contractorPhone:(null==e?void 0:e.phone)||"",contractorEmail:(null==e?void 0:e.email)||"",subcontractors:t.map(e=>({name:e.name,license:e.license,phone:e.phone,email:e.email,specialties:e.specialties})),checklist:p},a=await h.createPermit(s);n(a),i(),v({customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",propertyAddress:"",propertyParcelId:"",propertyZoning:"",primaryContractorId:"",subcontractorIds:[],county:"",permitType:""}),g([])}catch(e){S(e.message||"Failed to create permit package")}finally{k(!1)}};return s?(0,a.jsx)(m,{onClose:i,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Permit Package"})}),(0,a.jsxs)("form",{onSubmit:E,className:"p-6 space-y-6",children:[C&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:C}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Customer Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(o,{label:"Customer Name",name:"customerName",value:N.customerName,onChange:D,required:!0}),(0,a.jsx)(o,{label:"Phone Number",name:"customerPhone",type:"tel",value:N.customerPhone,onChange:D,required:!0}),(0,a.jsx)(o,{label:"Email Address",name:"customerEmail",type:"email",value:N.customerEmail,onChange:D,required:!0}),(0,a.jsx)(o,{label:"Customer Address",name:"customerAddress",value:N.customerAddress,onChange:D,required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Property Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(o,{label:"Property Address",name:"propertyAddress",value:N.propertyAddress,onChange:D,required:!0}),(0,a.jsx)(o,{label:"Parcel ID",name:"propertyParcelId",value:N.propertyParcelId,onChange:D}),(0,a.jsx)(o,{label:"Zoning",name:"propertyZoning",value:N.propertyZoning,onChange:D,placeholder:"e.g., R-1 Residential"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contractor Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Contractor *"}),(0,a.jsxs)("select",{name:"primaryContractorId",value:N.primaryContractorId,onChange:D,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select Primary Contractor"}),x.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - ",e.license]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcontractors"}),(0,a.jsx)("div",{className:"space-y-2",children:x.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",value:e.id,checked:N.subcontractorIds.includes(e.id.toString()),onChange:e=>{let t=e.target.value;v(s=>({...s,subcontractorIds:e.target.checked?[...s.subcontractorIds,t]:s.subcontractorIds.filter(e=>e!==t)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[e.name," - ",e.specialties]})]},e.id))})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(c,{type:"button",variant:"secondary",onClick:()=>b(!f),className:"text-sm",children:f?"Cancel":"+ Add New Contractor"})}),f&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Add New Contractor"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsx)(o,{label:"Contractor Name",name:"newContractorName",value:N.newContractorName||"",onChange:D,placeholder:"e.g., ABC Construction LLC"}),(0,a.jsx)(o,{label:"License Number",name:"newContractorLicense",value:N.newContractorLicense||"",onChange:D,placeholder:"e.g., CBC123456"}),(0,a.jsx)(o,{label:"Phone",name:"newContractorPhone",value:N.newContractorPhone||"",onChange:D,placeholder:"e.g., (305) 555-0101"}),(0,a.jsx)(o,{label:"Email",name:"newContractorEmail",value:N.newContractorEmail||"",onChange:D,placeholder:"e.g., info@contractor.com"}),(0,a.jsx)(o,{label:"Address",name:"newContractorAddress",value:N.newContractorAddress||"",onChange:D,placeholder:"e.g., 123 Main St, City, State"}),(0,a.jsx)(o,{label:"Specialties",name:"newContractorSpecialties",value:N.newContractorSpecialties||"",onChange:D,placeholder:"e.g., General Construction, Renovations"})]}),(0,a.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,a.jsx)(c,{type:"button",onClick:L,disabled:!N.newContractorName||!N.newContractorLicense,className:"text-sm",children:"Add Contractor"}),(0,a.jsx)(c,{type:"button",variant:"secondary",onClick:()=>{b(!1),v(e=>({...e,newContractorName:"",newContractorLicense:"",newContractorPhone:"",newContractorEmail:"",newContractorAddress:"",newContractorSpecialties:""}))},className:"text-sm",children:"Cancel"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Permit Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"County"}),(0,a.jsxs)("select",{name:"county",value:N.county,onChange:D,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select County"}),["Alachua","Baker","Bay","Bradford","Brevard","Broward","Calhoun","Charlotte","Citrus","Clay","Collier","Columbia","DeSoto","Dixie","Duval","Escambia","Flagler","Franklin","Gadsden","Gilchrist","Glades","Gulf","Hamilton","Hardee","Hendry","Hernando","Highlands","Hillsborough","Holmes","Indian River","Jackson","Jefferson","Lafayette","Lake","Lee","Leon","Levy","Liberty","Madison","Manatee","Marion","Martin","Miami-Dade","Monroe","Nassau","Okaloosa","Okeechobee","Orange","Osceola","Palm Beach","Pasco","Pinellas","Polk","Putnam","St. Johns","St. Lucie","Santa Rosa","Sarasota","Seminole","Sumter","Suwannee","Taylor","Union","Volusia","Wakulla","Walton","Washington"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permit Type"}),(0,a.jsxs)("select",{name:"permitType",value:N.permitType,onChange:D,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select Permit Type"}),l.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]})]}),p.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Required Documents & Checklist"}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"County:"})," ",N.county," | ",(0,a.jsx)("strong",{children:"Permit Type:"})," ",null==(t=l.find(e=>e.value===N.permitType))?void 0:t.label]})}),y?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading checklist..."})]}):(0,a.jsx)("div",{className:"space-y-3",children:p.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.required&&(0,a.jsx)("span",{className:"inline-block mt-2 px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded",children:"Required"})]})]},t))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)(c,{type:"button",variant:"secondary",onClick:i,disabled:w,children:"Cancel"}),(0,a.jsx)(c,{type:"submit",disabled:w,children:w?"Creating...":"Create Permit Package"})]})]})]})}):null}let F=C("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),O=C("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),U=C("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),B=C("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),H=C("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),z=C("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),V=C("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),G=C("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function W(e){let{onBack:t}=e,[s,o]=(0,r.useState)("overview"),[m,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)({totalUsers:0,totalPackages:0,activePackages:0,completedPackages:0,systemUptime:"99.9%",lastBackup:new Date().toISOString()}),[g,y]=(0,r.useState)([]),[j,f]=(0,r.useState)({maintenanceMode:!1,allowNewRegistrations:!0,maxFileSize:"10MB",sessionTimeout:"24h",emailNotifications:!0,smsNotifications:!1});(0,r.useEffect)(()=>{b()},[]);let b=async()=>{x(!0);try{let e=(await h.getPermits()).packages||[];p({totalUsers:1,totalPackages:e.length,activePackages:e.filter(e=>"Submitted"===e.status).length,completedPackages:e.filter(e=>"Completed"===e.status).length,systemUptime:"99.9%",lastBackup:new Date().toISOString()}),y([{id:1,name:"Demo User",email:"demo@permitpro.com",role:"user",status:"active",lastLogin:new Date().toISOString(),packagesCount:e.length},{id:2,name:"Admin User",email:"admin@permitpro.com",role:"admin",status:"active",lastLogin:new Date().toISOString(),packagesCount:0}])}catch(e){console.error("Failed to load admin data:",e)}finally{x(!1)}},N=(e,t)=>{f(s=>({...s,[e]:t}))},v=async(e,t)=>{x(!0);try{console.log("Performing ".concat(t," on user ").concat(e)),"suspend"===t?y(t=>t.map(t=>t.id===e?{...t,status:"suspended"}:t)):"activate"===t?y(t=>t.map(t=>t.id===e?{...t,status:"active"}:t)):"delete"===t&&y(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to ".concat(t," user:"),e)}finally{x(!1)}},w=[{id:"overview",name:"Overview",icon:z},{id:"users",name:"Users",icon:F},{id:"settings",name:"Settings",icon:V}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c,{variant:"outline",onClick:t,className:"mr-4",children:"← Back to App"}),(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(G,{className:"h-8 w-8 mr-3 text-red-600"}),"Admin Dashboard"]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)(d,{variant:"default",className:"bg-red-100 text-red-800",children:"Admin Mode"})})]})})}),(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("nav",{className:"flex space-x-8",children:w.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center ".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(t,{className:"h-4 w-4 mr-2"}),e.name]},e.id)})})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:m?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)(a.Fragment,{children:["overview"===s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(i,{children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(F,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.totalUsers})]})]})})}),(0,a.jsx)(i,{children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(D,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Packages"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.totalPackages})]})]})})}),(0,a.jsx)(i,{children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(O,{className:"h-8 w-8 text-yellow-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Packages"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.activePackages})]})]})})}),(0,a.jsx)(i,{children:(0,a.jsx)(l,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(U,{className:"h-8 w-8 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.completedPackages})]})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(B,{className:"h-5 w-5 mr-2"}),"System Health"]})}),(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"System Uptime"}),(0,a.jsx)(d,{variant:"success",children:u.systemUptime})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Last Backup"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:new Date(u.lastBackup).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Database Status"}),(0,a.jsx)(d,{variant:"success",children:"Healthy"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"API Status"}),(0,a.jsx)(d,{variant:"success",children:"Online"})]})]})})]}),(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(H,{className:"h-5 w-5 mr-2"}),"Recent Activity"]})}),(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),(0,a.jsx)("span",{children:"System backup completed"}),(0,a.jsx)("span",{className:"ml-auto text-gray-500",children:"2h ago"})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),(0,a.jsx)("span",{children:"New user registered"}),(0,a.jsx)("span",{className:"ml-auto text-gray-500",children:"4h ago"})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-3"}),(0,a.jsx)("span",{children:"Package status updated"}),(0,a.jsx)("span",{className:"ml-auto text-gray-500",children:"6h ago"})]})]})})]})]})]}),"users"===s&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),(0,a.jsx)(c,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Add User"})]})}),(0,a.jsx)(l,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Packages"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)(d,{variant:"admin"===e.role?"default":"secondary",children:e.role})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)(d,{variant:"active"===e.status?"success":"warning",children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.packagesCount}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.lastLogin).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:["active"===e.status?(0,a.jsx)(c,{size:"sm",variant:"outline",onClick:()=>v(e.id,"suspend"),children:"Suspend"}):(0,a.jsx)(c,{size:"sm",variant:"outline",onClick:()=>v(e.id,"activate"),children:"Activate"}),(0,a.jsx)(c,{size:"sm",variant:"outline",onClick:()=>v(e.id,"delete"),className:"text-red-600 hover:text-red-700",children:"Delete"})]})]},e.id))})]})})})]})}),"settings"===s&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(i,{children:[(0,a.jsx)(n,{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Settings"})}),(0,a.jsxs)(l,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Mode"}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:j.maintenanceMode,onChange:e=>N("maintenanceMode",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Enable maintenance mode"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allow New Registrations"}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:j.allowNewRegistrations,onChange:e=>N("allowNewRegistrations",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Allow new user registrations"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max File Size"}),(0,a.jsxs)("select",{value:j.maxFileSize,onChange:e=>N("maxFileSize",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"5MB",children:"5MB"}),(0,a.jsx)("option",{value:"10MB",children:"10MB"}),(0,a.jsx)("option",{value:"25MB",children:"25MB"}),(0,a.jsx)("option",{value:"50MB",children:"50MB"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout"}),(0,a.jsxs)("select",{value:j.sessionTimeout,onChange:e=>N("sessionTimeout",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"1h",children:"1 Hour"}),(0,a.jsx)("option",{value:"8h",children:"8 Hours"}),(0,a.jsx)("option",{value:"24h",children:"24 Hours"}),(0,a.jsx)("option",{value:"7d",children:"7 Days"})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Notification Settings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:j.emailNotifications,onChange:e=>N("emailNotifications",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Email Notifications"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:j.smsNotifications,onChange:e=>N("smsNotifications",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"SMS Notifications"})]})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)(c,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Save Settings"})})]})]})})]})})]})}function _(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)([]),[n,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{g()},[]);let g=async()=>{try{if(!localStorage.getItem("permitProToken"))return void u(!1);let e=await h.getPermits();i(e.packages||[]),t(e.user||{name:"User"})}catch(e){console.error("Failed to load packages:",e),localStorage.removeItem("permitProToken")}finally{u(!1)}};return x?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading PermitPro..."})]})}):e?d?(0,a.jsx)(W,{onBack:()=>{m(!1)}}):n?(0,a.jsx)(T,{packageData:n,onBack:()=>{l(null)},onUpdate:e=>{i(t=>t.map(t=>t.id===e.id?e:t)),l(e)}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{packages:s,onCreatePackage:()=>o(!0),onSelectPackage:e=>{l(e)},onLogout:()=>{h.logout(),t(null),i([]),l(null),m(!1)}}),(0,a.jsx)(R,{isOpen:c,onClose:()=>o(!1),onPackageCreated:e=>{i(t=>[e,...t])}})]}):(0,a.jsx)(p,{onLogin:e=>{t(e),g()},onAdminLogin:e=>{t({...e,role:"admin"}),m(!0)}})}},4240:(e,t,s)=>{Promise.resolve().then(s.bind(s,2239))}},e=>{e.O(0,[441,255,358],()=>e(e.s=4240)),_N_E=e.O()}]);